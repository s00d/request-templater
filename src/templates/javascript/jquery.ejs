<% const { url, method, mimeType, headers, postData, cookies } = locals; %>
// Construct the request URL
var fullUrl = '<%= url %>';

// Set up the request configuration object
var config = {
url: fullUrl,
type: '<%= method %>',
headers: {
'Content-Type': '<%= mimeType %>',
<% headers.forEach(header => { %>
    '<%= header.name %>': '<%= header.value %>',
<% }) %>
},
data: <% if (postData.length === 1 && postData[0].type === 'file') { %>
    new FormData(document.getElementById('#file_upload_form'))
<% } else if (postData.length > 0) { %>
    '<%= postData.map(param => param.name + '=' + encodeURIComponent(param.value)).join('&') %>'
<% } else { %>
    null
<% } %>
};

// Add cookies to the request
<% cookies.forEach(cookie => { %>
    document.cookie = '<%= cookie.name %>=<%= cookie.value %>';
<% }) %>

// Send the request using jQuery
$.ajax(config)
    .done(function(data) {
        console.log('Response:', data);
    })
    .fail(function(jqXHR, textStatus) {
        console.error('Error:', textStatus);
    });
